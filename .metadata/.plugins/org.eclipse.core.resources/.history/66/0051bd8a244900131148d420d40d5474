import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.InputStream;
import java.io.OutputStream;
import java.util.Properties;

import javafx.scene.control.TextField;


public class SettingHelper {

	private SettingHelper() {
		//NOP
	}

	//Privates
	private void savePlayerName(String name) throws Exception {
		Properties props = new Properties();
		props.setProperty("PlayerName", name);
		File f = new File(_filename);
		OutputStream out = new FileOutputStream(f);
		props.storeToXML(out, "Property-File for TicTacToe");
	}
	
	private String loadPlayerName() throws Exception {
		Properties props = new Properties();
		InputStream is = null;
		File f = new File(_filename);

		// Create the file if not existing
		if (!f.exists()) {
			f.createNewFile();
		}

		is = new FileInputStream(f);
		props.load(is);
		if(props.getProperty(_propertyNamePlayer).equals("")) {
			return _defaultName;
		}
		return props.getProperty(_propertyNamePlayer);
	}
	
	//Publics	
	public void init() throws Exception {
		PlayerName.setText(loadPlayerName());
	}

	//Statics Private
	private static SettingsController _instance;
	
	private static final String _propertyNamePlayer = "PlayerName";

	private final static String _filename = "TicTacToe_Properties.xml";
		
	private final static String _defaultName = "Player1";
	
	//Statics Public
	public static SettingsController getInstance() { 
		if(_instance == null) {
			_instance = new SettingHelper();
		}
		return _instance;
	}
}
